<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Mecanic LocomotivƒÉ - Trim IV 2025 (PregƒÉtiri IarnƒÉ)</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <style>
        /* CSS-ul a rƒÉmas acela»ôi pentru a pƒÉstra stilul uniform. */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            position: relative;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 16px;
            opacity: 0.9;
        }

        .personal-info {
            padding: 40px;
            max-width: 600px;
            margin: 0 auto;
        }

        .personal-info h2 {
            color: #667eea;
            margin-bottom: 30px;
            text-align: center;
            font-size: 24px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }

        .form-group input[type="text"],
        .form-group input[type="date"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input[type="text"]:focus,
        .form-group input[type="date"]:focus {
            outline: none;
            border-color: #667eea;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .radio-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 10px 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
        }

        .radio-label:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .radio-label input[type="radio"] {
            margin-right: 8px;
            cursor: pointer;
        }

        .quiz-content {
            padding: 30px;
        }

        .question-block {
            margin-bottom: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .question-number {
            color: #667eea;
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .question-text {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            line-height: 1.6;
            color: #2c3e50;
        }

        .options {
            margin-top: 15px;
        }

        .option {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: flex-start;
        }

        .option:hover {
            border-color: #667eea;
            transform: translateX(5px);
        }

        .option input[type="radio"] {
            margin-right: 12px;
            margin-top: 3px;
            cursor: pointer;
            width: 18px;
            height: 18px;
        }

        .option label {
            cursor: pointer;
            flex: 1;
            line-height: 1.5;
        }

        .option.correct {
            background: #d4edda;
            border-color: #28a745;
        }

        .option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }

        .option.correct::before {
            content: "‚úì ";
            color: #28a745;
            font-weight: bold;
            margin-right: 5px;
        }

        .option.incorrect::before {
            content: "‚úó ";
            color: #dc3545;
            font-weight: bold;
            margin-right: 5px;
        }

        .btn-container {
            text-align: center;
            margin: 30px 0;
            padding: 0 30px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            margin: 5px;
        }

        .btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        .reset-btn {
            background: linear-gradient(135deg, #f5576c 0%, #f093fb 100%);
        }

        .results {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin: 20px 30px;
            text-align: center;
            display: none;
        }
        
        .results.show {
            display: block;
        }

        .results h2 {
            margin-bottom: 10px;
            font-size: 28px;
        }

        .score {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 15px;
            font-family: 'Dancing Script', cursive;
        }

        .score-message {
            font-size: 18px;
            font-weight: 500;
        }

        .export-section {
            padding: 30px;
            text-align: center;
            display: none;
            border-top: 1px solid #e0e0e0;
            margin-top: 20px;
        }

        .export-section.show {
            display: block;
        }

        .export-section h3 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 22px;
        }

        .export-btn {
            background: #28a745;
            background: linear-gradient(135deg, #28a745 0%, #40a08e 100%);
        }

        .signature-section {
            text-align: right;
            padding: 0 30px 30px 30px;
            color: #777;
        }

        .signature {
            font-family: 'Dancing Script', cursive;
            font-size: 24px;
            margin-top: 5px;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÇ Test Mecanic LocomotivƒÉ - PregƒÉtiri IarnƒÉ</h1>
            <p>Trimestrul IV - 2025</p>
        </div>

        <div class="personal-info" id="personalInfo">
            <h2>Date Personale</h2>
            <div class="form-group">
                <label for="nume">Nume »ôi Prenume *</label>
                <input type="text" id="nume" required placeholder="Ex: Popescu Ion">
            </div>
            <div class="form-group">
                <label>Func»õia *</label>
                <div class="radio-group">
                    <label class="radio-label">
                        <input type="radio" name="functie" value="Mecanic" required>
                        Mecanic
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="functie" value="Mecanic Ajutor" required>
                        Mecanic Ajutor
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label for="data">Data *</label>
                <input type="date" id="data" required>
            </div>
            <button class="btn" onclick="startQuiz()">√éncepe Testul</button>
        </div>

        <div class="quiz-content" id="quizContent" style="display:none;"></div>

        <div class="btn-container">
            <button class="btn" id="checkBtn" onclick="checkAnswers()" style="display:none;">VerificƒÉ RƒÉspunsurile</button>
            <button class="btn reset-btn" id="resetBtn" onclick="resetQuiz()" style="display:none;">Reia Testul</button>
        </div>

        <div class="results" id="results"></div>

        <div class="export-section" id="exportSection" style="display:none;">
            <h3>üì• ExportƒÉ Rezultatele</h3>
            <button class="btn export-btn" onclick="exportToText()">üíæ DescarcƒÉ ca Text</button>
            <button class="btn export-btn" onclick="copyToClipboard()">üìã CopiazƒÉ √Æn Clipboard</button>
            <button class="btn export-btn" onclick="printResults()">üñ®Ô∏è PrinteazƒÉ</button>
            <div class="summary-text" id="summaryText" style="display:none;"></div>
        </div>

        <div class="signature-section">
            <div style="font-size: 14px; margin-bottom: 5px; color: #555;">√éntocmit</div>
            <div class="signature">Ecobici Marian</div>
        </div>
    </div>

    <script>
        const questions = [
            {
                id: 1,
                text: "Mecanicii de locomotivƒÉ de la trenurile √Æn circula»õie sunt obliga»õi sƒÉ comunice datele referitoare la eventualele precipitatii »ôi restrictii neavizate pe care le √Ænt√¢lnesc √Æn parcurs:",
                options: [
                    "A) CƒÉtre mecanicii de locomotivƒÉ pe care √Æi √Ænt√¢lnesc, √Æn parcurs, pe linia vecinƒÉ, prin radiotelefon, sau primei sta»õii de cale feratƒÉ care urmeazƒÉ dupƒÉ locul unde a fƒÉcut constatarea.",
                    "B) Doar cƒÉtre mecanicii de locomotivƒÉ pe care √Æi √Ænt√¢lnesc √Æn parcurs, pe linia vecinƒÉ.",
                    "C) Mecanicii de locomotivƒÉ de la trenurile √Æn circulatie sunt obligati sa comunice datele referitoare la eventualele precipitatii »ôi restrictii neavizate pe care le √Æntalnesc √Æn parcurs primei statii de cale ferata care urmeaza dupa locul unde a facut constatarea - prin radio telefon sau catre mecanicii de locomotiva pe care √Æi √Æntalnesc, √Æn parcurs, pe linia vecina."
                ],
                correct: 0
            },
            {
                id: 2,
                text: "Mecanicul de locomotivƒÉ este obligat sƒÉ dea semnalele de aten»õie √Ænainte de √Ænceperea circula»õiei cu locomotiva:",
                options: [
                    "A) C√¢nd personalul de la manevrƒÉ nu se aflƒÉ √Æn raza sa vizualƒÉ.",
                    "B) DacƒÉ la tren se fac probele de fr√¢nƒÉ cu fr√¢na automatƒÉ, √Æn caz de ploaie, ninsoare sau cea»õƒÉ.",
                    "C) DupƒÉ ce a pornit motorul Diesel."
                ],
                correct: 0
            },
            {
                id: 3,
                text: "Mecanicii de locomotivƒÉ de la trenurile √Æn circula»õie sunt obliga»õi sƒÉ comunice datele referitoare la eventualele precipita»õii »ôi restric»õii neavizate pe care le √Ænt√¢lnesc √Æn parcurs primei sta»õii de cale feratƒÉ care urmeazƒÉ dupƒÉ locul unde a fƒÉcut constatarea - prin radiotelefon sau cƒÉtre mecanicii de locomotivƒÉ pe care √Æi √Ænt√¢lnesc, √Æn parcurs, pe linia vecinƒÉ.",
                options: [
                    "A) Fals.",
                    "B) AdevƒÉrat."
                ],
                correct: 1
            },
            {
                id: 4,
                text: "C√¢nd poate fi ridicat pantograful de pe locomotivƒÉ?",
                options: [
                    "A) C√¢nd nu se semnalizeazƒÉ vizual la firul de contact prezen»õa ghe»õii.",
                    "B) La oprire √Æn linie curentƒÉ, √Æn cazul unor cƒÉderi de zƒÉpadƒÉ abundente care ar putea duce la √Ænghe»õarea firului de contact, dupƒÉ ce se va aviza operatorul de circula»õie »ôi apoi se va cobor√Æ pantograful »ôi se va a»ôtepta o perioadƒÉ pentru a se ridica pantograful din fa»õƒÉ »ôi a se pleca spre prima sta»õie de cale feratƒÉ.",
                    "C) √én cazul unor deranjamente ale instala»õiei electrice de for»õƒÉ la locomotivƒÉ."
                ],
                correct: 1
            },
            {
                id: 5,
                text: "Mecanicii de locomotivƒÉ vor avea √Æn vedere ca circula»õia trenurilor sƒÉ se desfƒÉ»ôoare cu pantografele ridicate alternativ din douƒÉ √Æn douƒÉ ore, pentru a avea o bunƒÉ curƒÉ»õare a firului de contact.",
                options: [
                    "A) Fals.",
                    "B) AdevƒÉrat."
                ],
                correct: 0
            },
            {
                id: 6,
                text: "Pe timpul iernii, √Ænainte de intrarea √Æn depou, la remorcare multiplƒÉ, la care trenul este deservit de douƒÉ locomotive electrice, mecanicul de locomotivƒÉ va avea √Æn vedere ca locomotiva din fa»õƒÉ sƒÉ aibƒÉ pantograful cobor√¢t »ôi locomotiva din spate sƒÉ aibƒÉ pantograful ridicat.",
                options: [
                    "A) Fals.",
                    "B) AdevƒÉrat."
                ],
                correct: 0
            },
            {
                id: 7,
                text: "C√¢nd poate avea loc o excep»õie de la regula de a avea pantografele ridicate alternativ din douƒÉ √Æn douƒÉ ore?",
                options: [
                    "A) Excep»õia are loc √Æn cazul remorcƒÉrii unui tren √Æn dubla tractiune cu ambele locomotive √Æn capul trenului, c√¢nd ambele locomotive vor circula cu ambele pantografe ridicate.",
                    "B) Excep»õia are loc √Æn cazul √Æn care la una din locomotive are loc o defec»õiune la unul din pantografe, »ôi se va cobor√Æ cel defect.",
                    "C) Excep»õia poate avea loc √Æn cazul remorcƒÉrii unui tren √Æn dublƒÉ trac»õiune cu ambele locomotive √Æn capul trenului, cand prima locomotivƒÉ circulƒÉ cu ambele pantografe ridicate, iar a doua locomotivƒÉ circulƒÉ cu pantograful din spate ridicat. √én cazul normalizarii situa»õiei la prima oprire se va trece la remorcarea cu pantografele ridicate spate spate."
                ],
                correct: 2
            },
            {
                id: 8,
                text: "Mecanicul de locomotivƒÉ pe timp de iarnƒÉ va urmƒÉrii modul de ridicare »ôi coborare a pantografului ≈üi de executare a RAC farƒÉ abateri de la program.",
                options: [
                    "A) AdevƒÉrat.",
                    "B) Fals."
                ],
                correct: 0
            },
            {
                id: 9,
                text: "Pe timp cu temperaturi scazute ≈üi v√¢nt puternic la circulatia mai multor locomotive electrice in zone cu rambleu, se recomanda sa ramana √Æn functie (regim de tractiune) locomotiva din cap, iar la rota»ôƒÉ sa se coboare pantografele.",
                options: [
                    "A) Fals.",
                    "B) AdevƒÉrat."
                ],
                correct: 0
            },
            {
                id: 10,
                text: "Pentru prevenirea degradƒÉrii izola»õiei la transformatoare, ma»ôinile rotative »ôi motoarele electrice de trac»õiune (MET) din cauza condensului, personalul de locomotivƒÉ este obligat sƒÉ:",
                options: [
                    "A) Men»õinƒÉ √Æn func»õiune aparatele de √ÆncƒÉlzire din cabine »ôi din compartimentul ma»ôinilor. √én zonele de exploatare, c√¢nd temperatura scade sub 0¬∞ C, personalul de locomotivƒÉ va asigura alimentarea cu energie electricƒÉ a ma»ôinilor rotative, MET, transformatoarelor, etc. de la sursele de alimentare exterioare (la 1500 V/25 KV) sau direct de la cablul trifazat 380 V/50 Hz, prin racordul montat √Æn exteriorul locomotivei.",
                    "B) Men»õinƒÉ √Æn func»õiune aparatele de √ÆncƒÉlzire din cabine »ôi din compartimentul ma»ôinilor numai dacƒÉ locomotiva se aflƒÉ pe linia de primire-expediere.",
                    "C) √én zonele de exploatare, c√¢nd temperatura scade sub 0¬∞ C, personalul de locomotivƒÉ va asigura alimentarea cu energie electricƒÉ a ma»ôinilor rotative, MET, transformatoarelor, etc. numai de la sursele de alimentare exterioare (la 1500 V/25 KV)."
                ],
                correct: 0
            },
            {
                id: 11,
                text: "Pe timpul iernii, mecanicul de locomotivƒÉ va avea √Æn vedere ca sistemul de »ôtergƒÉtoare »ôi spƒÉlƒÉtoare de parbriz sƒÉ func»õioneze corect, √Æn special la ie»ôirea din tunele sau √Æn urma depƒÉ»ôirilor de tren.",
                options: [
                    "A) Fals.",
                    "B) AdevƒÉrat."
                ],
                correct: 1
            },
            {
                id: 12,
                text: "√én cazul √Æn care pe parcursul rutei √Ænt√¢mpinƒÉ defec»õiuni la sistemul de »ôtergƒÉtoare »ôi spƒÉlƒÉtoare de parbriz, mecanicul de locomotivƒÉ va:",
                options: [
                    "A) Opri √Æn linie curentƒÉ pentru a remedia defec»õiunea sau, √Æn cel mai rƒÉu caz, va solicita remorcare.",
                    "B) Va merge p√¢nƒÉ √Æn sta»õia de cale feratƒÉ urmƒÉtoare, unde va remedia defec»õiunea, »ôi √Æn cel mai rƒÉu caz, va merge cu vitezƒÉ redusƒÉ p√¢nƒÉ √Æn sta»õia de cale feratƒÉ urmƒÉtoare unde va lua locomotive de ajutor.",
                    "C) Va merge p√¢nƒÉ √Æn sta»õia de cale feratƒÉ urmƒÉtoare, unde va remedia defec»õiunea, iar √Æn cel mai rƒÉu caz, va merge cu vitezƒÉ redusƒÉ p√¢nƒÉ √Æn sta»õia de cale feratƒÉ urmƒÉtoare."
                ],
                correct: 2
            },
            {
                id: 13,
                text: "Pe timp de iarnƒÉ, pentru a evita spargerea circuitului de fr√¢nare din cauza depunerilor de ghea»õƒÉ »ôi zƒÉpadƒÉ, se recomandƒÉ ca la oprirea la semnale sau √Æn sta»õii, fr√¢na sƒÉ fie slƒÉbitƒÉ c√¢t mai rar posibil, pentru a men»õine temperatura ridicatƒÉ a garniturilor de fr√¢nƒÉ.",
                options: [
                    "A) Fals.",
                    "B) AdevƒÉrat."
                ],
                correct: 0
            },
            {
                id: 14,
                text: "Cum se interzice a fi ridicate pantografele √Æn cazul remorcƒÉrii unui tren √Æn dublƒÉ trac»õiune cu ambele locomotive √Æn capul trenului, √Æn cazul apari»õiei de defecte la pantografe?",
                options: [
                    "A) Prima locomotivƒÉ cu pantograful din fa»õƒÉ ridicat, iar a doua cu cel din spate ridicat",
                    "B) Ambele locomotive numai cu pantografele din spate ridicate",
                    "C) Prima locomotivƒÉ cu ambele pantografe ridicate »ôi a doua cu cel din spate ridicat."
                ],
                correct: 0
            },
            {
                id: 15,
                text: "Care sunt condi»õiile de pornire a MDA pe pozi»õia REMIZAT",
                options: [
                    "A) Temperatura apei scade sub 25 Grade si tensiune bateriei scade la 140 Vcc",
                    "B) MDA porneste automat cand temperatura ambientala scade sub 0 grade",
                    "C) Temperatura apei scade sub 40 Grade si tensiune bateriei scade la 140 Vcc"
                ],
                correct: 2
            }
        ];

        let userAnswers = {};
        let checked = false;
        let personalData = {};
        const totalQuestions = 15; // Totalul √ÆntrebƒÉrilor este 15
        const TEST_SLUG = "Pregatiri_Iarna_Trim_IV_2025"; // SLUG UNIC

        function selectOption(qId, optIndex) {
            if (checked) return;
            userAnswers[qId] = optIndex;

            // Logica de eviden»õiere vizualƒÉ (rƒÉm√¢ne neschimbatƒÉ)
            document.querySelectorAll(`#q${qId} .option`).forEach((opt, index) => {
                opt.classList.remove('selected');
                opt.querySelector('input').checked = false;
                if (index === optIndex) {
                    opt.classList.add('selected');
                    opt.querySelector('input').checked = true;
                }
            });
        }

        function startQuiz() {
            const nume = document.getElementById('nume').value.trim();
            const functie = document.querySelector('input[name="functie"]:checked');
            const data = document.getElementById('data').value;

            if (!nume || !functie || !data) {
                alert('‚ö†Ô∏è Te rog completeazƒÉ toate c√¢mpurile obligatorii!');
                return;
            }

            personalData = {
                nume: nume,
                functie: functie.value,
                data: data
            };

            document.getElementById('personalInfo').style.display = 'none';
            document.getElementById('quizContent').style.display = 'block';
            renderQuiz();
            
            document.getElementById('checkBtn').style.display = 'inline-block';
            document.getElementById('resetBtn').style.display = 'none';
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function renderQuiz() {
            const quizContent = document.getElementById('quizContent');
            let html = '';

            questions.forEach(q => {
                html += `
                    <div class="question-block" id="q${q.id}">
                        <div class="question-number">√éntrebarea ${q.id}</div>
                        <div class="question-text">${q.text}</div>
                        <div class="options">
                `;

                q.options.forEach((option, optIndex) => {
                    html += `
                        <div class="option" onclick="selectOption(${q.id}, ${optIndex})">
                            <input type="radio" name="q${q.id}" id="q${q.id}_opt${optIndex}" value="${optIndex}">
                            <label for="q${q.id}_opt${optIndex}">${option}</label>
                        </div>
                    `;
                });

                html += `
                        </div>
                    </div>
                `;
            });

            quizContent.innerHTML = html;
        }

        function checkAnswers() {
            if (checked) return;
            
            if (Object.keys(userAnswers).length !== totalQuestions) {
                alert(`‚ö†Ô∏è Te rog rƒÉspunde la toate cele ${totalQuestions} de √ÆntrebƒÉri √Ænainte de a verifica! Ai rƒÉspuns la ${Object.keys(userAnswers).length} √ÆntrebƒÉri.`);
                return;
            }
            
            checked = true;
            let score = 0;

            questions.forEach(q => {
                const options = document.querySelectorAll(`#q${q.id} .option`);
                const userAnswer = userAnswers[q.id];
                let isCorrect = userAnswer === q.correct;

                options.forEach((opt, index) => {
                    opt.style.pointerEvents = 'none'; // DezactiveazƒÉ clicurile
                    
                    if (index === q.correct) {
                        opt.classList.add('correct');
                    }
                    
                    if (userAnswer !== undefined && index === userAnswer && !isCorrect) {
                        opt.classList.add('incorrect');
                    }
                });

                if (isCorrect) {
                    score++;
                }
            });

            const percentage = Math.round((score / totalQuestions) * 100);
            let message = '';
            let calificativ = '';
            let status = '‚ùå NECORESPUNZƒÇTOR';
            
            // Logica de calificare (15 √ÆntrebƒÉri)
            if (score >= 14) { 
                calificativ = 'A';
                message = 'üéâ Excelent! Cuno»ôti foarte bine materia!';
                status = '‚úÖ CORESPUNZƒÇTOR';
            } else if (score >= 11) { 
                calificativ = 'B';
                message = 'üëç Foarte bine! ContinuƒÉ sƒÉ √Ænve»õi!';
                status = '‚úÖ CORESPUNZƒÇTOR';
            } else if (score >= 8) { 
                calificativ = 'C';
                message = 'üìö Bine, dar mai este loc de √ÆmbunƒÉtƒÉ»õire!';
                status = '‚úÖ CORESPUNZƒÇTOR';
            } else {
                calificativ = 'D';
                message = 'üìñ Trebuie sƒÉ mai studiezi materia!';
            }

            document.getElementById('results').innerHTML = `
                <h2>Rezultate Test</h2>
                <div class="score">${score} / ${totalQuestions}</div>
                <div class="score-message">${percentage}% - Calificativ: ${calificativ} - ${status}</div>
                <div class="score-message">${message}</div>
            `;
            document.getElementById('results').classList.add('show');
            document.getElementById('checkBtn').style.display = 'none';
            document.getElementById('resetBtn').style.display = 'inline-block';

            generateSummary(score, percentage, calificativ, status);
            document.getElementById('exportSection').classList.add('show');
            
            // AUTOMAT: DescarcƒÉ »ôi CopiazƒÉ
            exportToText(); 
            copyToClipboard(); 

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function generateSummary(score, percentage, calificativ, status) {
            const date = new Date(personalData.data);
            const formattedDate = date.toLocaleDateString('ro-RO', { year: 'numeric', month: 'long', day: 'numeric' });
            
            let summary = `
 ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
 ‚ïë TEST MECANIC LOCOMOTIVƒÇ - PREGƒÇTIRI IARNƒÇ (Trim IV - 2025) ‚ïë
 ‚ïë (VERIFICAREA CUNO»òTIN»öELOR - ${totalQuestions} √éNTREBƒÇRI) ‚ïë
 ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
 üìã DATE PERSONALE:
 ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
 Nume »ôi Prenume: ${personalData.nume}
 Func»õia: ${personalData.functie}
 Data testului: ${formattedDate}

 üìä REZULTAT FINAL:
 ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
 Punctaj ob»õinut: ${score} / ${totalQuestions} (${percentage}%)
 Calificativ: ${calificativ} - ${status}
 
 üìù RƒÇSPUNSURI DETALIATE:
 ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
`;

            questions.forEach(q => {
                const userAnswer = userAnswers[q.id];
                const isCorrect = userAnswer === q.correct;
                const statusIcon = isCorrect ? '‚úì' : '‚úó';
                
                const givenAnswerText = userAnswer !== undefined ? q.options[userAnswer] : 'Niciun rƒÉspuns';
                const correctAnswerText = q.options[q.correct];

                summary += `
${statusIcon} √éntrebarea ${q.id}: ${isCorrect ? 'CORECT' : 'GRE»òIT'}
   ${q.text}
   
   RƒÉspuns dat: ${givenAnswerText.replace(/^[A-C]\)\s*/, '')}
   RƒÉspuns corect: ${correctAnswerText.replace(/^[A-C]\)\s*/, '')}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
`;
            });

            summary += `
√éntocmit
Ecobici Marian
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚ïë Document generat automat. Nu necesitƒÉ semnƒÉturƒÉ olografƒÉ. ‚ïë
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
`;
            
            document.getElementById('summaryText').textContent = summary;
        }

        function exportToText() {
            const summary = document.getElementById('summaryText').textContent;
            const blob = new Blob([summary], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            // Numele de fi»ôier actualizat
            a.download = `Test_${TEST_SLUG}_${personalData.nume.replace(/\s+/g, '_')}_${personalData.data}.txt`; 
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function copyToClipboard() {
            const summaryText = document.getElementById('summaryText').textContent;
            navigator.clipboard.writeText(summaryText).then(() => {
                console.log('Rezultatele au fost copiate √Æn clipboard!');
            }).catch(err => {
                console.error('Eroare la copierea √Æn clipboard:', err);
                alert('Eroare la copierea √Æn clipboard. VƒÉ rugƒÉm descƒÉrca»õi fi»ôierul text.');
            });
        }

        function printResults() {
            const summary = document.getElementById('summaryText').textContent;
            const printWindow = window.open('', '', 'height=600,width=800');
            printWindow.document.write(`
                <html>
                <head>
                    <title>Rezultate Test</title>
                    <style>
                        body { font-family: 'Courier New', monospace; padding: 20px; }
                        pre { white-space: pre-wrap; line-height: 1.6; }
                    </style>
                </head>
                <body>
                    <pre>${summary}</pre>
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        function resetQuiz() {
            checked = false;
            userAnswers = {};
            personalData = {};
            
            document.getElementById('results').classList.remove('show');
            document.getElementById('exportSection').classList.remove('show');
            document.getElementById('checkBtn').style.display = 'inline-block';
            document.getElementById('resetBtn').style.display = 'none';
            document.getElementById('personalInfo').style.display = 'block';
            document.getElementById('quizContent').style.display = 'none';
            
            document.getElementById('nume').value = '';
            document.getElementById('data').value = new Date().toISOString().split('T')[0]; // ReseteazƒÉ data la azi
            document.querySelectorAll('input[name="functie"]').forEach(r => r.checked = false); 
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Ini»õializare: SeteazƒÉ data curentƒÉ ca default, dar nu »ôi func»õia.
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('data').value = today;
        });
    </script>
</body>
</html>
