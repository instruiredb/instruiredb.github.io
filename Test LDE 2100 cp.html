<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test LDE 2100 CP - 2025</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            position: relative;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 16px;
            opacity: 0.9;
        }

        .personal-info {
            padding: 40px;
            max-width: 600px;
            margin: 0 auto;
        }

        .personal-info h2 {
            color: #667eea;
            margin-bottom: 30px;
            text-align: center;
            font-size: 24px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }

        .form-group input[type="text"],
        .form-group input[type="date"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input[type="text"]:focus,
        .form-group input[type="date"]:focus {
            outline: none;
            border-color: #667eea;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .radio-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 10px 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
        }

        .radio-label:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .radio-label input[type="radio"] {
            margin-right: 8px;
            cursor: pointer;
        }

        .quiz-content {
            padding: 30px;
        }

        .question-block {
            margin-bottom: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .question-number {
            color: #667eea;
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .question-text {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            line-height: 1.6;
            color: #2c3e50;
        }

        .options {
            margin-top: 15px;
        }

        .option {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: flex-start;
        }

        .option:hover {
            border-color: #667eea;
            transform: translateX(5px);
        }

        .option input[type="radio"],
        .option input[type="checkbox"] {
            margin-right: 12px;
            margin-top: 3px;
            cursor: pointer;
            width: 18px;
            height: 18px;
        }

        .option label {
            cursor: pointer;
            flex: 1;
            line-height: 1.5;
        }

        .option.correct {
            background: #d4edda;
            border-color: #28a745;
        }

        .option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }

        .option.correct::before {
            content: "‚úì ";
            color: #28a745;
            font-weight: bold;
            margin-right: 5px;
        }

        .option.incorrect::before {
            content: "‚úó ";
            color: #dc3545;
            font-weight: bold;
            margin-right: 5px;
        }

        .btn-container {
            text-align: center;
            margin: 30px 0;
            padding: 0 30px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
            box-shadow: none;
        }

        .results {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin: 20px 30px;
            text-align: center;
            display: none;
        }

        .results.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .results h2 {
            font-size: 24px;
            margin-bottom: 15px;
        }

        .results .score {
            font-size: 48px;
            font-weight: bold;
            margin: 20px 0;
        }

        .score-message {
            font-size: 18px;
            margin-top: 10px;
        }

        .reset-btn {
            background: white;
            color: #f5576c;
            margin-top: 20px;
        }

        .export-section {
            text-align: center;
            margin: 20px 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            display: none;
        }

        .export-section.show {
            display: block;
        }

        .export-section h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .export-btn {
            background: #28a745;
            margin: 5px;
        }

        .export-btn:hover {
            background: #218838;
        }

        .summary-text {
            background: white;
            padding: 20px;
            border-radius: 8px;
            text-align: left;
            margin: 20px 0;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap;
        }
        
        .signature-section {
            padding: 20px 30px 40px;
            text-align: right;
            margin-top: 20px;
        }

        .signature {
            font-family: 'Dancing Script', cursive;
            font-size: 28px;
            color: #2c3e50;
            font-weight: 700;
            display: inline-block;
            border-top: 1px solid #ccc;
            padding-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÇ Test Mecanic LocomotivƒÉ LDE 2100 CP</h1>
            <p>Verificarea cuno»ôtin»õelor - 2025</p>
        </div>

        <div class="personal-info" id="personalInfo">
            <h2>Date Personale</h2>
            <div class="form-group">
                <label for="nume">Nume »ôi Prenume *</label>
                <input type="text" id="nume" required placeholder="Ex: Popescu Ion">
            </div>
            <div class="form-group">
                <label>Func»õia *</label>
                <div class="radio-group">
                    <label class="radio-label">
                        <input type="radio" name="functie" value="Mecanic" required>
                        Mecanic
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="functie" value="Mecanic Ajutor" required>
                        Mecanic Ajutor
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label for="data">Data *</label>
                <input type="date" id="data" required>
            </div>
            <button class="btn" onclick="startQuiz()">√éncepe Testul</button>
        </div>

        <div class="quiz-content" id="quizContent" style="display:none;"></div>

        <div class="btn-container">
            <button class="btn" id="checkBtn" onclick="checkAnswers()">VerificƒÉ RƒÉspunsurile</button>
            <button class="btn reset-btn" id="resetBtn" onclick="resetQuiz()" style="display:none;">Reia Testul</button>
        </div>

        <div class="results" id="results"></div>

        <div class="export-section" id="exportSection">
            <h3>üì• ExportƒÉ Rezultatele</h3>
            <button class="btn export-btn" onclick="exportToText()">üíæ DescarcƒÉ ca Text</button>
            <button class="btn export-btn" onclick="copyToClipboard()">üìã CopiazƒÉ √Æn Clipboard</button>
            <button class="btn export-btn" onclick="printResults()">üñ®Ô∏è PrinteazƒÉ</button>
            <div class="summary-text" id="summaryText"></div>
        </div>
        
        <div class="signature-section">
            <div style="font-size: 14px; margin-bottom: 5px; color: #555;">√éntocmit</div>
            <div class="signature">Ecobici Marian</div>
        </div>
    </div>

    <script>
        const questions = [
            {
                id: 1,
                text: "C√¢»õi cilindri are motorul diesel »ôi cum sunt a»ôeza»õi?",
                options: [
                    "A) 12 cilindrii a»ôeza»õi pe 2 linii √Æn formƒÉ de V.",
                    "B) 16 cilindrii a»ôeza»õi pe 2 linii a c√¢te 8 cilindri.",
                    "C) 12 cilindri a»ôeza»õi pe 2 linii a c√¢te 6 cilindri."
                ],
                correct: 2 
            },
            {
                id: 2,
                text: "Care este tura»õia la mers √Æn gol »ôi tura»õia maximƒÉ?",
                options: [
                    "A) 350/750 rot/min.",
                    "B) 350/1000 rot/min.",
                    "C) 340/850 rot/min."
                ],
                correct: 0 
            },
            {
                id: 3,
                text: "Din ce post de conducere se mai poate accesa panourile ale blocului de aparate electrice?",
                options: [
                    "A) Are acces din postul de conducere 1.",
                    "B) Are acces numai din sala ma»ôinilor.",
                    "C) Are acces din postul de conducere 2."
                ],
                correct: 0 
            },
            {
                id: 4,
                text: "Antrenarea pompei de transfer combustibil »ôi a pompei auxiliare de ulei se face de cƒÉtre un singur motor electric?",
                options: [
                    "A) AdevƒÉrat.",
                    "B) Fals."
                ],
                correct: 0 
            },
            {
                id: 5,
                text: "Pompa auxiliarƒÉ de ulei asigurƒÉ ungerea preliminarƒÉ motorului diesel »ôi func»õioneazƒÉ dupƒÉ oprirea acestuia c√¢teva minute pentru a asigura ungerea »ôi rƒÉcirea?",
                options: [
                    "A) AdevƒÉrat.",
                    "B) Fals."
                ],
                correct: 0 
            },
            {
                id: 6,
                text: "Ce tip de filtru de ulei este utilizat √Æn instala»õia de ungere a MD compus dintr-un filtru brut cu fante ≈üi un filtru fin?",
                options: [
                    "A) Filtrul centrifugal de ulei.",
                    "B) Filtrul combinat de ulei.",
                    "C) Filtrul principal de ulei."
                ],
                correct: 1 
            },
            {
                id: 7,
                text: "Care este presiunea minimƒÉ a uleiului pentru ungerea MD la temperatura lichidului de rƒÉcire de 70¬∞C?",
                options: [
                    "A) 1.15 kgf/cm¬≤",
                    "B) 1.70 kgf/cm¬≤",
                    "C) 0.8 kgf/cm¬≤"
                ],
                correct: 1 
            },
            {
                id: 8,
                text: "Instala»õia compusƒÉ din filtrul combinat de ulei, filtrul de ulei al regulatorului mecanic ≈üi centrifugele de ulei, se nume»ôte:",
                options: [
                    "A) Instala»õia de combustibil.",
                    "B) Instala»õia de rƒÉcire cu apƒÉ.",
                    "C) Instala»õia de ungere a MD."
                ],
                correct: 2 
            },
            {
                id: 9,
                text: "Prin ce se asigurƒÉ transferul de cƒÉldurƒÉ dintre uleiul de ungere MD »ôi lichidul de rƒÉcire √Æn timpul func»õionƒÉrii MD?",
                options: [
                    "A) Cu ajutorul instala»õiei MDA.",
                    "B) Prin intermediul schimbƒÉtorului de cƒÉldurƒÉ.",
                    "C) Prin intermediul filtrului combinat."
                ],
                correct: 1 
            },
            {
                id: 10,
                text: "Care sunt elementele componente ale instala»õiei hidrostat? (Selecta»õi toate rƒÉspunsurile corecte)",
                options: [
                    "A) Pompa hidrostaticƒÉ, Cilindri",
                    "B) Motor hidrostatic",
                    "C) Cilindri de comandƒÉ ai jaluzelelor."
                ],
                correct: [0, 1, 2]
            },
            {
                id: 11,
                text: "√én cazul apari»õiei unor avarii grave, prin circuitele de protec»õie se comandƒÉ fr√¢narea rapidƒÉ a trenului »ôi oprirea imediatƒÉ a MD. √én cazul unor avarii mai pu»õin grave se comandƒÉ scoaterea din sarcinƒÉ a grupului MD-GP sau doar semnalizarea prin instala»õia de apel optic.",
                options: [
                    "A) AdevƒÉrat.",
                    "B) Fals."
                ],
                correct: 0 
            },
            {
                id: 12,
                text: "C√¢nd se aduce MD la mers √Æn gol »ôi √Æntreruperea trac»õiunii? (Selecta»õi toate rƒÉspunsurile corecte)",
                options: [
                    "A) C√¢nd presiunea din conducta generalƒÉ a instala»õiei de fr√¢nƒÉ scade sub 1 kgf/cm¬≤",
                    "B) SAU c√¢nd nivelul apei de rƒÉcire din rezervorul de compensare scade sub 160 l.",
                    "C) C√¢nd apare punere la masƒÉ pe circuitul de for»õƒÉ."
                ],
                correct: [0, 1]
            },
            {
                id: 13,
                text: "C√¢nd se comandƒÉ oprirea necomandatƒÉ a MD? (Selecta»õi toate rƒÉspunsurile corecte)",
                options: [
                    "A) C√¢nd presiunea uleiului din instala»õia de ungere a MD scade sub valoarea de 0,85 kgf/cm¬≤",
                    "B) C√¢nd apare punere la masƒÉ pe circuitul auxiliar.",
                    "C) C√¢nd presiunea apei din instala»õia de rƒÉcire a MD scade sub valoarea de 0,4 kgf/cm¬≤."
                ],
                correct: [0, 2]
            },
            {
                id: 14,
                text: "Suspensia materialului rulant este alcƒÉtuitƒÉ din suspensia elasticƒÉ a boghiului pe osii (suspensia primarƒÉ) »ôi suspensia elasticƒÉ a cutiei pe boghiuri (suspensia secundarƒÉ).",
                options: [
                    "A) AdevƒÉrat.",
                    "B) Fals."
                ],
                correct: 0 
            },
            {
                id: 15,
                text: "Suspensia cutiei pe boghiuri (suspensia secundarƒÉ) se face prin sprijinirea cutiei √Æn patru puncte pe boghiuri prin intermediul a patru arcuri duble √Æn foi.",
                options: [
                    "A) AdevƒÉrat.",
                    "B) Fals."
                ],
                correct: 0 
            }
        ];

        let userAnswers = {};
        let userMultipleAnswers = {};
        let checked = false;
        let personalData = {};

        function startQuiz() {
            const nume = document.getElementById('nume').value.trim();
            const functieElement = document.querySelector('input[name="functie"]:checked');
            const data = document.getElementById('data').value;

            if (!nume || !functieElement || !data) {
                alert('‚ö†Ô∏è Te rog completeazƒÉ toate c√¢mpurile obligatorii (Nume, Func»õie, Data)!');
                return;
            }

            personalData = {
                nume: nume,
                functie: functieElement.value, 
                data: data
            };

            document.getElementById('personalInfo').style.display = 'none';
            document.getElementById('quizContent').style.display = 'block';
            renderQuiz();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function renderQuiz() {
            const quizContent = document.getElementById('quizContent');
            let html = '';

            questions.forEach((q) => {
                const isMultipleAnswer = Array.isArray(q.correct);
                const inputType = isMultipleAnswer ? 'checkbox' : 'radio';
                
                html += `
                    <div class="question-block" id="q${q.id}">
                        <div class="question-number">√éntrebarea ${q.id}</div>
                        <div class="question-text">${q.text}</div>
                        <div class="options">
                `;

                q.options.forEach((option, optIndex) => {
                    if (isMultipleAnswer) {
                        html += `
                            <div class="option" onclick="selectMultipleOption(${q.id}, ${optIndex})">
                                <input type="checkbox" name="q${q.id}" id="q${q.id}_opt${optIndex}" value="${optIndex}">
                                <label for="q${q.id}_opt${optIndex}">${option}</label>
                            </div>
                        `;
                    } else {
                        html += `
                            <div class="option" onclick="selectOption(${q.id}, ${optIndex})">
                                <input type="radio" name="q${q.id}" id="q${q.id}_opt${optIndex}" value="${optIndex}">
                                <label for="q${q.id}_opt${optIndex}">${option}</label>
                            </div>
                        `;
                    }
                });

                html += `
                        </div>
                    </div>
                `;
            });

            quizContent.innerHTML = html;
        }

        function selectOption(questionId, optionIndex) {
            if (checked) return;
            
            userAnswers[questionId] = optionIndex;
            const radio = document.getElementById(`q${questionId}_opt${optionIndex}`);
            radio.checked = true;
        }

        function selectMultipleOption(questionId, optionIndex) {
            if (checked) return;
            
            const checkbox = document.getElementById(`q${questionId}_opt${optionIndex}`);
            checkbox.checked = !checkbox.checked;
            
            if (!userMultipleAnswers[questionId]) {
                userMultipleAnswers[questionId] = [];
            }
            
            if (checkbox.checked) {
                if (!userMultipleAnswers[questionId].includes(optionIndex)) {
                    userMultipleAnswers[questionId].push(optionIndex);
                }
            } else {
                userMultipleAnswers[questionId] = userMultipleAnswers[questionId].filter(idx => idx !== optionIndex);
            }
        }

        function checkAnswers() {
            if (checked) return;
            
            checked = true;
            let score = 0;
            const totalQuestions = questions.length; 

            questions.forEach(q => {
                const options = document.querySelectorAll(`#q${q.id} .option`);
                const isMultipleAnswer = Array.isArray(q.correct);
                
                let isCorrect = false;
                
                if (isMultipleAnswer) {
                    const userSelectedAnswers = userMultipleAnswers[q.id] || [];
                    
                    const correctAnswersSet = new Set(q.correct);
                    const userAnswersSet = new Set(userSelectedAnswers);
                    
                    isCorrect = correctAnswersSet.size === userAnswersSet.size && 
                               [...correctAnswersSet].every(ans => userAnswersSet.has(ans));
                    
                    options.forEach((opt, index) => {
                        opt.style.pointerEvents = 'none';
                        
                        if (q.correct.includes(index)) {
                            opt.classList.add('correct');
                        }
                        
                        if (userSelectedAnswers.includes(index) && !q.correct.includes(index)) {
                            opt.classList.add('incorrect');
                        }
                    });
                    
                    if (isCorrect) {
                        score++;
                    }
                } else {
                    const userAnswer = userAnswers[q.id];
                    isCorrect = userAnswer === q.correct;
                    
                    options.forEach((opt, index) => {
                        opt.style.pointerEvents = 'none';
                        
                        if (index === q.correct) {
                            opt.classList.add('correct');
                        }
                        
                        if (userAnswer !== undefined && index === userAnswer && userAnswer !== q.correct) {
                            opt.classList.add('incorrect');
                        }
                    });
                    
                    if (isCorrect) {
                        score++;
                    }
                }
            });

            const percentage = Math.round((score / totalQuestions) * 100);
            
            let message = '';
            let calificativ = '';
            let status = '‚ùå NECORESPUNZƒÇTOR';

            if (score >= 14) {
                calificativ = 'A';
                message = 'üéâ Excelent! Cuno»ôti foarte bine materia!';
                status = '‚úÖ CORESPUNZƒÇTOR';
            } else if (score >= 11) {
                calificativ = 'B';
                message = 'üëç Foarte bine! ContinuƒÉ sƒÉ √Ænve»õi!';
                status = '‚úÖ CORESPUNZƒÇTOR';
            } else if (score >= 8) {
                calificativ = 'C';
                message = 'üìö Bine, dar mai este loc de √ÆmbunƒÉtƒÉ»õire!';
                status = '‚úÖ CORESPUNZƒÇTOR';
            } else {
                calificativ = 'D';
                message = 'üìñ Trebuie sƒÉ mai studiezi materia!';
            }

            document.getElementById('results').innerHTML = `
                <h2>Rezultate Test</h2>
                <div class="score">${score} / ${totalQuestions}</div>
                <div class="score-message">${percentage}% - Calificativ: ${calificativ} - ${status}</div>
                <div class="score-message">${message}</div>
            `;
            document.getElementById('results').classList.add('show');
            document.getElementById('checkBtn').style.display = 'none';
            document.getElementById('resetBtn').style.display = 'inline-block';

            generateSummary(score, percentage, calificativ, status);
            document.getElementById('exportSection').classList.add('show');

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function generateSummary(score, percentage, calificativ, status) {
            const date = new Date(personalData.data);
            const formattedDate = date.toLocaleDateString('ro-RO', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });

            const totalQuestions = questions.length;

            let summary = `
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë       TEST MECANIC LOCOMOTIVƒÇ LDE 2100 CP - 2025              ‚ïë
‚ïë            (VERIFICAREA CUNO»òTIN»öELOR - ${totalQuestions} √éNTREBƒÇRI)            ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

üìã DATE PERSONALE:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   Nume »ôi Prenume: ${personalData.nume}
   Func»õia: ${personalData.functie}
   Data testului: ${formattedDate}

üìä REZULTATE:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
   Punctaj: ${score} / ${totalQuestions}
   Procent: ${percentage}%
   Calificativ: ${calificativ}
   Status: ${status}

üìù RƒÇSPUNSURI DETALIATE:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
`;

            questions.forEach(q => {
                const isMultipleAnswer = Array.isArray(q.correct);
                
                let isCorrect;
                let correctAnswerText;
                let givenAnswerText;
                
                if (isMultipleAnswer) {
                    const userSelectedAnswers = userMultipleAnswers[q.id] || [];
                    const correctAnswersSet = new Set(q.correct);
                    const userAnswersSet = new Set(userSelectedAnswers);
                    
                    isCorrect = correctAnswersSet.size === userAnswersSet.size && 
                               [...correctAnswersSet].every(ans => userAnswersSet.has(ans));
                    
                    correctAnswerText = q.correct.map(idx => q.options[idx].replace(/^[A-C]\)\s*/, '')).join(' + ');
                    
                    if (userSelectedAnswers.length > 0) {
                        givenAnswerText = userSelectedAnswers.map(idx => q.options[idx].replace(/^[A-C]\)\s*/, '')).join(' + ');
                    } else {
                        givenAnswerText = 'Niciun rƒÉspuns';
                    }
                } else {
                    const userAnswer = userAnswers[q.id];
                    isCorrect = userAnswer === q.correct;
                    correctAnswerText = q.options[q.correct].replace(/^[A-C]\)\s*/, '');
                    givenAnswerText = userAnswer !== undefined ? q.options[userAnswer].replace(/^[A-C]\)\s*/, '') : 'Niciun rƒÉspuns';
                }
                
                const statusIcon = isCorrect ? '‚úì' : '‚úó';

                summary += `
${statusIcon} √éntrebarea ${q.id}: ${isCorrect ? 'CORECT' : 'GRE»òIT'}
   ${q.text}
   
   RƒÉspuns dat: ${givenAnswerText}
   RƒÉspuns corect: ${correctAnswerText}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
`;
            });

            summary += `
√éntocmit
Ecobici Marian
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚ïë  Document generat automat - ${new Date().toLocaleString('ro-RO')}  ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
`;

            document.getElementById('summaryText').textContent = summary;
            return summary;
        }

        function exportToText() {
            const summary = document.getElementById('summaryText').textContent;
            const blob = new Blob([summary], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Test_LDE2100CP_${personalData.nume.replace(/\s+/g, '_')}_${personalData.data}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function copyToClipboard() {
            const summary = document.getElementById('summaryText').textContent;
            navigator.clipboard.writeText(summary).then(() => {
                alert('‚úÖ Rezultatele au fost copiate √Æn clipboard!');
            }).catch(err => {
                alert('‚ùå Eroare la copierea √Æn clipboard: ' + err);
            });
        }

        function printResults() {
            const summary = document.getElementById('summaryText').textContent;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                <head>
                    <title>Test Mecanic LocomotivƒÉ LDE 2100 CP - ${personalData.nume}</title>
                    <style>
                        body { font-family: 'Courier New', monospace; padding: 20px; }
                        pre { white-space: pre-wrap; line-height: 1.6; }
                    </style>
                </head>
                <body>
                    <pre>${summary}</pre>
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        function resetQuiz() {
            checked = false;
            userAnswers = {};
            userMultipleAnswers = {};
            personalData = {};
            
            document.getElementById('results').classList.remove('show');
            document.getElementById('exportSection').classList.remove('show');
            document.getElementById('checkBtn').style.display = 'inline-block';
            document.getElementById('resetBtn').style.display = 'none';
            document.getElementById('personalInfo').style.display = 'block';
            document.getElementById('quizContent').style.display = 'none';
            
            document.getElementById('nume').value = '';
            document.querySelectorAll('input[name="functie"]').forEach(r => r.checked = false);
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('data').value = today;
        });
    </script>
</body>
</html>
