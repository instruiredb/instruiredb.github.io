<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Mecanic LocomotivÄƒ - Trim IV 2025</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 16px;
            opacity: 0.9;
        }

        .personal-info {
            padding: 40px;
            max-width: 600px;
            margin: 0 auto;
        }

        .personal-info h2 {
            color: #667eea;
            margin-bottom: 30px;
            text-align: center;
            font-size: 24px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }

        .form-group input[type="text"],
        .form-group input[type="date"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input[type="text"]:focus,
        .form-group input[type="date"]:focus {
            outline: none;
            border-color: #667eea;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .radio-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 10px 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
        }

        .radio-label:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .radio-label input[type="radio"] {
            margin-right: 8px;
            cursor: pointer;
        }

        .quiz-content {
            padding: 30px;
        }

        .question-block {
            margin-bottom: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .question-number {
            color: #667eea;
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .question-text {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            line-height: 1.6;
            color: #2c3e50;
        }

        .options {
            margin-top: 15px;
        }

        .option {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: flex-start;
        }

        .option:hover {
            border-color: #667eea;
            transform: translateX(5px);
        }

        .option input[type="radio"] {
            margin-right: 12px;
            margin-top: 3px;
            cursor: pointer;
            width: 18px;
            height: 18px;
        }

        .option label {
            cursor: pointer;
            flex: 1;
            line-height: 1.5;
        }

        .option.correct {
            background: #d4edda;
            border-color: #28a745;
        }

        .option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }

        .option.correct::before {
            content: "âœ“ ";
            color: #28a745;
            font-weight: bold;
            margin-right: 5px;
        }

        .option.incorrect::before {
            content: "âœ— ";
            color: #dc3545;
            font-weight: bold;
            margin-right: 5px;
        }

        .matching-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            font-size: 14px;
        }
        
        .matching-table th, .matching-table td {
            padding: 12px;
            border: 1px solid #e0e0e0;
            text-align: left;
        }

        .matching-table th {
            background: #e9eefd;
            color: #667eea;
        }

        .matching-table td:first-child {
            font-weight: 600;
            background: #f8f9fa;
            width: 40%;
        }

        .btn-container {
            text-align: center;
            margin: 30px 0;
            padding: 0 30px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
            box-shadow: none;
        }

        .results {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin: 20px 30px;
            text-align: center;
            display: none;
        }

        .results.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .results h2 {
            font-size: 24px;
            margin-bottom: 15px;
        }

        .results .score {
            font-size: 48px;
            font-weight: bold;
            margin: 20px 0;
        }

        .score-message {
            font-size: 18px;
            margin-top: 10px;
        }

        .reset-btn {
            background: white;
            color: #f5576c;
            margin-top: 20px;
        }

        .export-section {
            text-align: center;
            margin: 20px 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            display: none;
        }

        .export-section.show {
            display: block;
        }

        .export-section h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .export-btn {
            background: #28a745;
            margin: 5px;
        }

        .export-btn:hover {
            background: #218838;
        }

        .summary-text {
            background: white;
            padding: 20px;
            border-radius: 8px;
            text-align: left;
            margin: 20px 0;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap;
        }
        
        .signature-section {
            padding: 20px 30px 40px;
            text-align: right;
            margin-top: 20px;
        }

        .signature {
            font-family: 'Dancing Script', cursive;
            font-size: 28px;
            color: #2c3e50;
            font-weight: 700;
            display: inline-block;
            border-top: 1px solid #ccc;
            padding-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš‚ Test Mecanic LocomotivÄƒ</h1>
            <p>Trimestrul IV - 2025</p>
        </div>

        <div class="personal-info" id="personalInfo">
            <h2>Date Personale</h2>
            <div class="form-group">
                <label for="nume">Nume È™i Prenume *</label>
                <input type="text" id="nume" required placeholder="Ex: Popescu Ion">
            </div>
            <div class="form-group">
                <label>FuncÈ›ia *</label>
                <div class="radio-group">
                    <label class="radio-label">
                        <input type="radio" name="functie" value="Mecanic" required>
                        Mecanic
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="functie" value="Mecanic Ajutor" required>
                        Mecanic Ajutor
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label for="data">Data *</label>
                <input type="date" id="data" required>
            </div>
            <button class="btn" onclick="startQuiz()">Ãncepe Testul</button>
        </div>

        <div class="quiz-content" id="quizContent" style="display:none;"></div>

        <div class="btn-container">
            <button class="btn" id="checkBtn" onclick="checkAnswers()" style="display:none;">VerificÄƒ RÄƒspunsurile</button>
            <button class="btn reset-btn" id="resetBtn" onclick="resetQuiz()" style="display:none;">Reia Testul</button>
        </div>

        <div class="results" id="results"></div>

        <div class="export-section" id="exportSection">
            <h3>ğŸ“¥ ExportÄƒ Rezultatele</h3>
            <button class="btn export-btn" onclick="exportToText()">ğŸ’¾ DescarcÄƒ ca Text</button>
            <button class="btn export-btn" onclick="copyToClipboard()">ğŸ“‹ CopiazÄƒ Ã®n Clipboard</button>
            <button class="btn export-btn" onclick="printResults()">ğŸ–¨ï¸ PrinteazÄƒ</button>
            <div class="summary-text" id="summaryText"></div>
        </div>

        <div class="signature-section">
            <div style="font-size: 14px; margin-bottom: 5px; color: #555;">Ãntocmit</div>
            <div class="signature">Ecobici Marian</div>
        </div>
        </div>

    <script>
        const questions = [
            {
                id: 1,
                text: "Ce obligaÈ›ie are personalul de locomotivÄƒ, Ã®n cazul unui tren aflat Ã®n circulaÈ›ie, cÃ¢nd constatÄƒ un obstacol neprevÄƒzut care necesitÄƒ Ã®nchiderea liniei curente?",
                options: [
                    "A) va aviza acest fapt impiegatului de miÈ™care din staÈ›ia cea mai apropiatÄƒ È™i va solicita Ã®mpingerea trenului Ã®n staÈ›ie.",
                    "B) va da semnale de \"Pericol\" repetate È™i va aviza acest fapt impiegatului de miÈ™care din prima staÈ›ie unde trenul are prevÄƒzutÄƒ oprire.",
                    "C) va aviza acest fapt, prin radiotelefon, impiegaÈ›ilor de miÈ™care din staÈ›iile vecine È™i mecanicilor tuturor trenurilor expediate care circulÄƒ Ã®n linie curentÄƒ."
                ],
                correct: 2
            },
            {
                id: 2,
                text: "UtilizaÈ›i corespunzÄƒtor indicaÈ›iile semnalelor acustice Ã®n funcÈ›ie de felul lor:",
                type: "matching",
                content: `
                    <table class="matching-table">
                        <thead>
                            <tr><th>Semnal (i)</th><th>IndicaÈ›ia semnalului (r)</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>i1) "Pornire"</td><td>r4) se dÄƒ cu fluierul locomotivei la fel ca È™i semnalul "atenÈ›ie"</td></tr>
                            <tr><td>i2) "Pericol"</td><td>r3) Ã®nseamnÄƒ trei sunete scurte, repetate, date cu fluierul</td></tr>
                            <tr><td>i3) "Agentul de la urma trenului sÄƒ plece la acoperirea obstacolului"</td><td>r1) acest semnal se dÄƒ dacÄƒ trenul s-a oprit Ã®n linie curentÄƒ È™i pericliteazÄƒ circulaÈ›ia pe linia vecinÄƒ</td></tr>
                            <tr><td>i4) "SlÄƒbeÈ™te frÃ¢na"</td><td>r2) acest semnal se dÄƒ la pornirea trenului, Ã®n locul semnalului "atenÈ›ie", dacÄƒ trenul este frÃ¢nat de mÃ¢nÄƒ sau mixt</td></tr>
                        </tbody>
                    </table>
                `,
                options: [
                    "A) (i1-r6) (i2-r5) (i3-r3) (i4-r1)",
                    "B) (i1-r2) (i2-r1) (i3-r6) (i4-r5)",
                    "C) (i1-r4) (i2-r3) (i3-r1) (i4-r2)"
                ],
                correct: 2
            },
            {
                id: 3,
                text: "DacÄƒ Ã®n parcurs apare necesitatea opririi neprevÄƒzute a unui tren Ã®n linie curentÄƒ, Ã®n cazul trenurilor care circulÄƒ fÄƒrÄƒ È™ef de tren, care din obligaÈ›iile È™efului de tren Ã®i revin mecanicului trenului?",
                options: [
                    "A) sÄƒ dea semnale de \"Pericol\" repetate cu fluierul sau sirena locomotivei.",
                    "B) sÄƒ ia legÄƒtura cu conductorul de bilete, Ã®n cazul Ã®n care acesta existÄƒ È™i sÄƒ stabileascÄƒ Ã®mpreunÄƒ mÄƒsurile È™i condiÈ›iile pentru circulaÈ›ia Ã®n continuare a trenului.",
                    "C) sÄƒ ia mÄƒsuri pentru acoperirea obstacolului sau a locului care constituie un pericol Ã®n circulaÈ›ia trenurilor pe liniile vecine, dacÄƒ este cazul."
                ],
                correct: 2
            },
            {
                id: 4,
                text: "Ce obligaÈ›ie are personalul cu responsabilitÄƒÈ›i Ã®n siguranÈ›a circulaÈ›iei feroviare, Ã®n timpul serviciului, atunci cÃ¢nd observÄƒ o neregulÄƒ Ã®n legÄƒturÄƒ cu siguranÈ›a circulaÈ›iei feroviare?",
                options: [
                    "A) sÄƒ remedieze neregula observatÄƒ.",
                    "B) sÄƒ sesizeze verbal È™i Ã®n scris, prin raport de eveniment, adresat conducÄƒtorului subunitÄƒÈ›ii din care face parte, orice neregulÄƒ observatÄƒ Ã®n legÄƒturÄƒ cu siguranÈ›a pe calea feratÄƒ, indiferent de domeniul de activitate feroviarÄƒ Ã®n care s-a produs.",
                    "C) sÄƒ avizeze Ã®n primul rÃ¢nd organele de poliÈ›ie TF."
                ],
                correct: 1
            },
            {
                id: 5,
                text: "Ãn cazurile Ã®n care s-au Ã®nregistrat loviri ale vehiculelor rutiere de cÄƒtre trenurile Ã®n circulaÈ›ie, personalul de locomotivÄƒ opreÈ™te È™i face o evaluare a urmÄƒrilor impactului È™i dacÄƒ nu s-au Ã®nregistrat victime omeneÈ™ti sau accidentaÈ›i, solicitÄƒ prezenÈ›a organelor PoliÈ›iei TF.",
                options: [
                    "A) AdevÄƒrat",
                    "B) Fals"
                ],
                correct: 1
            },
            {
                id: 6,
                text: "Ãn ce categorie se Ã®ncadreazÄƒ \"lovirea de vehicule rutiere la trecerile la nivel de cÄƒtre vehiculele feroviare aflate Ã®n miÈ™care\"?",
                options: [
                    "A) Accident feroviar.",
                    "B) Incident feroviar grupa A.",
                    "C) Accident feroviar grav."
                ],
                correct: 0
            },
            {
                id: 7,
                text: "Pentru care accidente nu se face investigarea?",
                options: [
                    "A) Pentru deraieri de vehicule feroviare din compunerea trenurilor la manevrÄƒ.",
                    "B) Pentru incendii la vehiculele feroviare din compunerea trenurilor Ã®n circulaÈ›ie È™i manevrÄƒ.",
                    "C) Pentru loviri ale vehiculelor rutiere la trecerile la nivel de cÄƒtre trenuri Ã®n circulaÈ›ie sau loviri ale persoanelor de cÄƒtre vehicule feroviare aflate Ã®n miÈ™care, cu excepÈ›ia cazurilor de suicid."
                ],
                correct: 2
            },
            {
                id: 8,
                text: "Ãn cazurile Ã®n care s-au Ã®nregistrat loviri ale vehiculelor rutiere de cÄƒtre trenurile Ã®n circulaÈ›ie, iar dacÄƒ s-au Ã®nregistrat victime omeneÈ™ti sau accidentaÈ›i mecanicul de locomotivÄƒ opreÈ™te È™i face o evaluare a urmÄƒrilor impactului È™i, Ã®n funcÈ›ie de acestea Ã®È™i continuÄƒ drumul, dacÄƒ are avizul celui care face investigarea accidentului.",
                options: [
                    "A) AdevÄƒrat",
                    "B) Fals"
                ],
                correct: 0
            },
            {
                id: 9,
                text: "Ce obligaÈ›ii are personalul de locomotivÄƒ Ã®n timpul parcursului dacÄƒ constatÄƒ cÄƒ linia de contact are depuneri de gheaÈ›Äƒ sau chiciurÄƒ?",
                options: [
                    "A) trebuie sÄƒ anunÈ›e dispeceratul electroenergetic despre acest fenomen prin intermediul IDM.",
                    "B) trebuie sÄƒ deconecteze imediat instalaÈ›ia de forÈ›Äƒ È™i serviciile auxiliare È™i din mers sÄƒ ridice È™i al doilea pantograf È™i numai dupÄƒ aceea sÄƒ repunÄƒ instalaÈ›iile Ã®n funcÈ›iune.",
                    "C) sÄƒ opreascÄƒ trenul, sÄƒ deconecteze disjunctorul È™i sÄƒ ridice numai pantograful din faÈ›Äƒ, dupÄƒ care continuÄƒ mersul."
                ],
                correct: 1
            },
            {
                id: 10,
                text: "Mecanicii de locomotivÄƒ de la trenurile Ã®n circulaÈ›ie sunt obligaÈ›i sÄƒ comunice datele referitoare la eventualele suluri de zÄƒpadÄƒ pe care le Ã®ntÃ¢lnesc Ã®n parcurs primei staÈ›ii de cale feratÄƒ care urmeazÄƒ dupÄƒ locul unde a fÄƒcut constatarea - prin radio, telefon sau cÄƒtre mecanicii de locomotivÄƒ pe care Ã®i Ã®ntÃ¢lnesc, Ã®n parcurs, pe linia vecinÄƒ.",
                options: [
                    "A) AdevÄƒrat",
                    "B) Fals"
                ],
                correct: 0
            },
            {
                id: 11,
                text: "Se interzice darea Ã®napoi a trenului, din linie curentÄƒ, fÄƒrÄƒ o Ã®nÈ›elegere prealabilÄƒ cu IDM din staÈ›ia care l-a expediat, Ã®n urmÄƒtoarele cazuri:",
                options: [
                    "A) pe timp cu ceaÈ›Äƒ, viscol È™i alte Ã®mprejurÄƒri nefavorabile, cÃ¢nd vizibilitatea semnalelor este redusÄƒ.",
                    "B) Ã®n cazul Ã®n care nu existÄƒ al doilea agent la urma trenului.",
                    "C) pe secÈ›ii de circulaÈ›ie cu BLA, cu excepÈ›ia trenurilor oprite fÄƒrÄƒ sÄƒ depÄƒÈ™eascÄƒ al doilea sector de bloc."
                ],
                correct: 0
            },
            {
                id: 12,
                text: "Ãn cazuri bine justificate (ceaÈ›Äƒ, viscol, Ã®ntreruperea tuturor mijloacelor de comunicaÈ›ie, vizibilitate necorespunzÄƒtoare a semnalelor) comunicÄƒrile radiotelefonice pot Ã®nlocui indicaÈ›ia semnalelor È™i a instalaÈ›iilor de siguranÈ›Äƒ a circulaÈ›iei.",
                options: [
                    "A) AdevÄƒrat",
                    "B) Fals"
                ],
                correct: 0
            },
            {
                id: 13,
                text: "Analizele de siguranÈ›Äƒ circulaÈ›iei, care reprezintÄƒ o componentÄƒ a sistemului de management al siguranÈ›ei circulaÈ›iei, se vor programa periodic la subunitÄƒÈ›ile de cale feratÄƒ.",
                options: [
                    "A) AdevÄƒrat",
                    "B) Fals"
                ],
                correct: 0
            },
            {
                id: 14,
                text: "Semnalele luminoase care nu afiÈ™eazÄƒ nici o indicaÈ›ie, semafoarele neiluminate pe timp de noapte, semnalele care dau indicaÈ›ii care se contrazic, semnalele care dau indicaÈ›ii dubioase, precum È™i semnalizarea nereglementarÄƒ ordonÄƒ oprirea.",
                options: [
                    "A) AdevÄƒrat",
                    "B) Fals"
                ],
                correct: 0
            },
            {
                id: 15,
                text: "Ce obligaÈ›ii are mecanicul de locomotivÄƒ dacÄƒ pe timp de noapte Ã®ntÃ¢lneÈ™te un semafor cu indicaÈ›ia de noapte pe oprire, iar indicaÈ›ia de zi este pe liber, respectiv reducere de vitezÄƒ sau felinarele sunt neiluminate?",
                options: [
                    "A) Va opri Ã®n faÈ›a semaforului, aÈ™teptÃ¢nd ordinul de circulaÈ›ie de la IDM.",
                    "B) Va lua Ã®n considerare indicaÈ›ia de zi dacÄƒ semnalul respectiv nu a fost avizat ca fiind defect.",
                    "C) Va circula cu viteza de maxim 20 km/h."
                ],
                correct: 1
            },
            {
                id: 16,
                text: "CorelaÈ›i corespunzÄƒtor semnalele date de agenÈ›i cu instrumente portative cu indicaÈ›ia semnalului pe timp de zi:",
                type: "matching",
                content: `
                    <table class="matching-table">
                        <thead>
                            <tr><th>Semnal (i)</th><th>IndicaÈ›ia semnalului (r)</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>i1) Ãnapoi</td><td>r3) se miÈ™cÄƒ steguleÈ›ul galben Ã®n arc de cerc, jos, Ã®naintea corpului È™i Ã®n acelaÈ™i timp se dau douÄƒ sunete lungi cu fluierul de mÃ¢nÄƒ</td></tr>
                            <tr><td>i2) "Pornirea trenului" dat de impiegatul de miÈ™care</td><td>r1) impiegatul de miÈ™care ridicÄƒ discul manual cu faÈ›a verde, spre mecanic</td></tr>
                            <tr><td>i3) Trecerea fÄƒrÄƒ oprire a trenului datÄƒ de impiegatul de miÈ™care, Ã®n staÈ›iile fÄƒrÄƒ semnal de ieÈ™ire</td><td>r2) impiegatul de miÈ™care miÈ™cÄƒ discul manual cu faÈ›a verde spre mecanic, deasupra capului</td></tr>
                        </tbody>
                    </table>
                `,
                options: [
                    "A) (i1-r5); (i2-r2); (i3-r1).",
                    "B) (i1-r3); (i2-r1); (i3-r5).",
                    "C) (i1-r3); (i2-r1); (i3-r2)."
                ],
                correct: 2
            },
            {
                id: 17,
                text: "Pentru o eficienÈ›Äƒ mai sporitÄƒ a stingerii incendiilor, unde se va acÈ›iona cu jetul stingÄƒtoarelor?",
                options: [
                    "A) Indiferent cum se va acÈ›iona cu jetul stingÄƒtorului, eficienÈ›a este aceeaÈ™i.",
                    "B) Se va acÈ›iona la baza focarului de incendiu.",
                    "C) Se va acÈ›iona dinspre margini spre mijloc astfel evitÃ¢ndu-se extinderea incendiului."
                ],
                correct: 1
            },
            {
                id: 18,
                text: "Pentru prevenirea incendiilor personalul de locomotivÄƒ este obligat:",
                options: [
                    "A) SÄƒ scoatÄƒ din funcÈ›ie instalaÈ›ia antipatinaj;",
                    "B) SÄƒ verifice starea sigiliilor la protecÈ›ii (relee, contactoare, robineti), blocuri de aparate, capacele de acces la relee È™i alte agregate specifice;",
                    "C) SÄƒ scurtcircuiteze protecÈ›iile blocurilor de aparate;"
                ],
                correct: 1
            },
            {
                id: 19,
                text: "Mecanicul de locomotivÄƒ anunÈ›Äƒ prin radiotelefon sau alte mijloace de comunicare aflate la dispoziÈ›ie prin intermediul IDM, agenÈ›i L, operatori RC, apariÈ›ia fumului sau flÄƒcÄƒrii, comunicÃ¢nd urmÄƒtoarele:",
                options: [
                    "A) ora la care a apÄƒrut degajarea de fum sau flacÄƒrÄƒ.",
                    "B) conecteazÄƒ bateriile de acumulatori, prin Ã®nchiderea Ã®ntreruptorului acestuia.",
                    "C) tipul de locomotivÄƒ."
                ],
                correct: 2
            },
            {
                id: 20,
                text: "Ãn cazul apariÈ›iei fumului sau flÄƒcÄƒrii la vehiculul feroviar motor, Ã®n timpul intervenÈ›iei de stingere a focarului, se folosesc:",
                options: [
                    "A) Ãn toate situaÈ›iile se utilizeazÄƒ stingÄƒtoarele cu apÄƒ.",
                    "B) stingÄƒtoarele cu bioxid de carbon pentru echipamentul electric, iar cele cu spumÄƒ chimicÄƒ sau praf È™i CO2 pentru restul echipamentului.",
                    "C) stingÄƒtoarele cu spumÄƒ chimicÄƒ sau praf pentru echipamentul electric, iar cele cu bioxid de carbon..."
                ],
                correct: 1
            },
            {
                id: 21,
                text: "Se considerÄƒ incendiu arderea rapidÄƒ care se dezvoltÄƒ fÄƒrÄƒ control Ã®n timp È™i spaÈ›iu, È™i care poate provoca distrugeri importante de bunuri materiale, sau poate pune Ã®n pericol viaÈ›a oamenilor, pentru a cÄƒrei lichidare este necesarÄƒ utilizarea metodelor, procedeelor, mijloacelor È™i substanÈ›elor de stingere adecvate.",
                options: [
                    "A) AdevÄƒrat",
                    "B) Fals"
                ],
                correct: 0
            },
            {
                id: 22,
                text: "Ce se verificÄƒ, din punct de vedere al prevenirii incendiilor, dupÄƒ pornirea motoarelor diesel?",
                options: [
                    "A) deconectarea releelor sau contactorilor, care asigurÄƒ pornirea motorului diesel pentru a fi sigurÄƒ funcÈ›ionarea.",
                    "B) Se verificÄƒ Ã®ncÄƒ o datÄƒ indicaÈ›iile nivelului lichidului de rÄƒcire È™i combustibil.",
                    "C) dacÄƒ toate instalaÈ›iile funcÈ›ioneazÄƒ normal È™i numai dupÄƒ aceea va pune locomotiva Ã®n miÈ™care."
                ],
                correct: 2
            },
            {
                id: 23,
                text: "La revizia efectuatÄƒ Ã®n sala maÈ™inilor Ã®n timpul parcursului, mecanicul ajutor va urmÄƒri, din punct de vedere al prevenirii incendiilor, ca temperatura uleiului sÄƒ nu depÄƒÈ™eascÄƒ temperatura maximÄƒ de funcÈ›ionare.",
                options: [
                    "A) AdevÄƒrat",
                    "B) Fals"
                ],
                correct: 0
            },
            {
                id: 24,
                text: "Pentru prevenirea incendiilor personalul de locomotivÄƒ este obligat:",
                options: [
                    "A) SÄƒ scoatÄƒ din funcÈ›ie instalaÈ›ia antipatinaj;",
                    "B) SÄƒ scurtcircuiteze protecÈ›iile blocurilor de aparate;",
                    "C) SÄƒ verifice starea sigiliilor la protecÈ›ii (relee, contactoare, robineti), blocuri de aparate, capacele de acces la relee È™i alte agregate specifice;"
                ],
                correct: 2
            }
        ];

        let userAnswers = {};
        let checked = false;
        let personalData = {};
        const totalQuestions = questions.length;
        
        // NOU: Identificator unic al testului pentru numele fiÈ™ierului
        const TEST_SLUG = "Mecanic_Trim_IV_2025"; 

        function startQuiz() {
            const nume = document.getElementById('nume').value.trim();
            const functie = document.querySelector('input[name="functie"]:checked');
            const data = document.getElementById('data').value;

            if (!nume || !functie || !data) {
                alert('âš ï¸ Te rog completeazÄƒ toate cÃ¢mpurile obligatorii!');
                return;
            }

            personalData = {
                nume: nume,
                functie: functie.value,
                data: data
            };

            document.getElementById('personalInfo').style.display = 'none';
            document.getElementById('quizContent').style.display = 'block';
            renderQuiz();
            
            document.getElementById('checkBtn').style.display = 'inline-block';
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function renderQuiz() {
            const quizContent = document.getElementById('quizContent');
            let html = '';

            questions.forEach((q, index) => {
                html += `
                    <div class="question-block" id="q${q.id}">
                        <div class="question-number">Ãntrebarea ${q.id}</div>
                        <div class="question-text">${q.text}</div>
                        ${q.type === 'matching' ? q.content : ''}
                        <div class="options">
                `;

                q.options.forEach((option, optIndex) => {
                    html += `
                        <div class="option" onclick="selectOption(${q.id}, ${optIndex})">
                            <input type="radio" name="q${q.id}" id="q${q.id}_opt${optIndex}" value="${optIndex}">
                            <label for="q${q.id}_opt${optIndex}">${option}</label>
                        </div>
                    `;
                });

                html += `
                        </div>
                    </div>
                `;
            });

            quizContent.innerHTML = html;
        }

        function selectOption(questionId, optionIndex) {
            if (checked) return;
            
            userAnswers[questionId] = optionIndex;
            const radio = document.getElementById(`q${questionId}_opt${optionIndex}`);
            radio.checked = true;
        }

        function checkAnswers() {
            if (checked) return;
            
            if (Object.keys(userAnswers).length !== totalQuestions) {
                alert(`âš ï¸ Te rog rÄƒspunde la toate cele ${totalQuestions} de Ã®ntrebÄƒri Ã®nainte de a verifica! Ai rÄƒspuns la ${Object.keys(userAnswers).length} Ã®ntrebÄƒri.`);
                return;
            }
            
            checked = true;
            let score = 0;

            questions.forEach(q => {
                const options = document.querySelectorAll(`#q${q.id} .option`);
                const userAnswer = userAnswers[q.id];

                options.forEach((opt, index) => {
                    opt.style.pointerEvents = 'none';
                    
                    if (index === q.correct) {
                        opt.classList.add('correct');
                    }
                    
                    if (userAnswer !== undefined && index === userAnswer && userAnswer !== q.correct) {
                        opt.classList.add('incorrect');
                    }
                });

                if (userAnswer === q.correct) {
                    score++;
                }
            });

            const percentage = Math.round((score / totalQuestions) * 100);
            let message = '';
            let calificativ = '';
            let status = 'âŒ NECORESPUNZÄ‚TOR';


            if (score >= 23) {
                calificativ = 'A';
                message = 'ğŸ‰ Excelent! CunoÈ™ti foarte bine materia!';
                status = 'âœ… CORESPUNZÄ‚TOR';
            } else if (score >= 18) {
                calificativ = 'B';
                message = 'ğŸ‘ Foarte bine! ContinuÄƒ sÄƒ Ã®nveÈ›i!';
                status = 'âœ… CORESPUNZÄ‚TOR';
            } else if (score >= 13) {
                calificativ = 'C';
                message = 'ğŸ“š Bine, dar mai este loc de Ã®mbunÄƒtÄƒÈ›ire!';
                status = 'âœ… CORESPUNZÄ‚TOR';
            } else {
                calificativ = 'D';
                message = 'ğŸ“– Trebuie sÄƒ mai studiezi materia!';
            }

            document.getElementById('results').innerHTML = `
                <h2>Rezultate Test</h2>
                <div class="score">${score} / ${totalQuestions}</div>
                <div class="score-message">${percentage}% - Calificativ: ${calificativ} - ${status}</div>
                <div class="score-message">${message}</div>
            `;
            document.getElementById('results').classList.add('show');
            document.getElementById('checkBtn').style.display = 'none';
            document.getElementById('resetBtn').style.display = 'inline-block';

            generateSummary(score, percentage, calificativ, status);
            document.getElementById('exportSection').classList.add('show');
            
            // ACTIUNE NOUA: DescarcÄƒ automat rezultatul ca fiÈ™ier text
            exportToText(); 

            // ACTIUNE: CopiazÄƒ automat rezultatul Ã®n clipboard
            copyToClipboard(); 

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function generateSummary(score, percentage, calificativ, status) {
            const date = new Date(personalData.data);
            const formattedDate = date.toLocaleDateString('ro-RO', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            


            let summary = `
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          TEST MECANIC LOCOMOTIVÄ‚ - TRIMESTRUL IV 2025          â•‘
â•‘                        (${totalQuestions} ÃNTREBÄ‚RI)                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ DATE PERSONALE:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   Nume È™i Prenume: ${personalData.nume}
   FuncÈ›ia: ${personalData.functie}
   Data testului: ${formattedDate}

ğŸ“Š REZULTATE:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   Punctaj: ${score} / ${totalQuestions}
   Procent: ${percentage}%
   Calificativ: ${calificativ}
   Status: ${status}

ğŸ“ RÄ‚SPUNSURI DETALIATE:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
`;

            questions.forEach(q => {
                const userAnswer = userAnswers[q.id];
                const isCorrect = userAnswer === q.correct;
                const statusIcon = isCorrect ? 'âœ“' : 'âœ—';
                
                const givenAnswerText = userAnswer !== undefined ? q.options[userAnswer] : 'Niciun rÄƒspuns';
                const correctAnswerText = q.options[q.correct];

                summary += `
${statusIcon} Ãntrebarea ${q.id}: ${isCorrect ? 'CORECT' : 'GREÈ˜IT'}
   ${q.text}
   
   RÄƒspuns dat: ${givenAnswerText.replace(/^[A-C]\)\s*/, '')}
   RÄƒspuns corect: ${correctAnswerText.replace(/^[A-C]\)\s*/, '')}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
`;
            });

            summary += `
                                                          Ãntocmit
                                                          Ecobici Marian
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Document generat automat - ${new Date().toLocaleString('ro-RO')}  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
`;


            document.getElementById('summaryText').textContent = summary;
            return summary;
        }

        function exportToText() {
            const summary = document.getElementById('summaryText').textContent;
            const blob = new Blob([summary], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            // Nume de fiÈ™ier cu identificatorul testului
            a.download = `Test_${TEST_SLUG}_${personalData.nume.replace(/\s+/g, '_')}_${personalData.data}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function copyToClipboard() {
            const summary = document.getElementById('summaryText').textContent;
            navigator.clipboard.writeText(summary).then(() => {
                alert('âœ… Rezultatele au fost copiate Ã®n clipboard!');
            }).catch(err => {
                alert('âŒ Eroare la copierea Ã®n clipboard: ' + err);
            });
        }

        function printResults() {
            const summary = document.getElementById('summaryText').textContent;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                <head>
                    <title>Test Mecanic LocomotivÄƒ - ${personalData.nume}</title>
                    <style>
                        body { font-family: 'Courier New', monospace; padding: 20px; }
                        pre { white-space: pre-wrap; line-height: 1.6; }
                    </style>
                </head>
                <body>
                    <pre>${summary}</pre>
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        function resetQuiz() {
            checked = false;
            userAnswers = {};
            personalData = {};
            
            document.getElementById('results').classList.remove('show');
            document.getElementById('exportSection').classList.remove('show');
            document.getElementById('checkBtn').style.display = 'none';
            document.getElementById('resetBtn').style.display = 'none';
            document.getElementById('personalInfo').style.display = 'block';
            document.getElementById('quizContent').style.display = 'none';
            
            document.getElementById('nume').value = '';
            document.getElementById('data').value = new Date().toISOString().split('T')[0];
            document.querySelectorAll('input[name="functie"]').forEach(r => r.checked = false);
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // SeteazÄƒ data curentÄƒ ca default
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('data').value = today;
        });
    </script>
</body>
</html>
